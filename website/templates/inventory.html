{% extends "base.html" %}
{% block title %}Inventory{% endblock %}

{% block content %}
    <div class="container mt-5">
        <h1 class="text-center mb-4">Inventory</h1>
        <div class="table-responsive">
            <table class="table table-striped table-hover" id="inventoryTable">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Title</th>
                        <th scope="col">Author</th>
                        <th scope="col">Genre</th>
                        <th scope="col">Status</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in inventory %}
                        <tr>
                            <td>{{ item.Title }}</td>
                            <td>{{ item.Author }}</td>
                            <td>{{ item.Genre }}</td>
                            <td>{{ item.Status }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <script>
        $(document).ready(function() {
    $('.status-checkbox').change(function() {
        console.log('Checkbox clicked');  // Add this line
        var bookId = $(this).data('book-id');
        var status = $(this).is(':checked');
        $.ajax({
            url: '/update-status',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ book_id: bookId, status: status }),
            success: function(response) {
                console.log(response.message);
            },
            error: function(response) {
                console.log(response.responseJSON.message);
            }
        });
    });
});
    </script>
    </div>
{% endblock %}